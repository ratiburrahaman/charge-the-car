var a={};a.bgMusic=null,a.Boot=function(){},a.Boot.prototype={preload:function(){this.load.image("bg","assets/images/bg.png"),this.load.image("loading-needle","assets/images/loading-needle.png"),this.load.image("loading-meter","assets/images/loading-meter.png"),this.load.image("loading-o","assets/images/loading-o.png"),this.load.image("loading-meter-red","assets/images/loading-meter-red.png"),this.load.spritesheet("btn","assets/images/btn.png",167,64),this.load.audio("audio-bg","assets/music/audio-bg.mp3"),this.load.audio("start","assets/music/start.mp3"),this.load.image("loading-guang","assets/images/loading-guang.png"),this.load.image("tips","assets/images/tips.png"),this.load.image("title-shadow","assets/images/title-shadow.png"),this.load.image("title","assets/images/title.png"),this.load.image("line","assets/images/line.png"),this.load.image("bg-shadow","assets/images/bg-shadow.png"),this.load.image("title1","assets/images/title1.png"),this.load.image("title2","assets/images/title2.png"),this.load.image("title3","assets/images/title3.png"),this.load.image("title4","assets/images/title4.png"),this.load.image("title5","assets/images/title5.png"),this.load.image("title6","assets/images/title6.png"),this.load.image("title7","assets/images/title7.png"),this.load.image("title8","assets/images/title8.png"),this.load.image("title9","assets/images/title9.png"),this.load.image("title10","assets/images/title10.png"),this.load.image("title11","assets/images/title11.png"),this.load.image("title12","assets/images/title12.png"),this.load.image("title13","assets/images/title13.png")},create:function(){this.input.maxPointers=1,this.scale.scaleMode=window.screen.width>640?Phaser.ScaleManager.SHOW_ALL:Phaser.ScaleManager.EXACT_FIT,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.state.start("preload"),a.W=this.game.width,a.H=this.game.height,this.stage.backgroundColor="#000"}},a.Preload=function(){},a.Preload.prototype={create:function(){function b(a){c.add.tween(a).to({x:500},1e3,"Linear",!0,!1).onComplete.add(function(c){c.x=120,b(a)},c)}var c=this;this.stage.backgroundColor="#000000",this.bg=this.add.sprite(0,0,"bg"),this.loadNeedle=this.add.sprite(this.world.centerX+5,578,"loading-needle"),this.loadNeedle.anchor.setTo(.5,.5),this.loadingo=this.add.sprite(this.world.centerX+9,575,"loading-o"),this.loadingo.anchor.x=.5,this.whitebmd=this.add.bitmapData(230,30),this.whitebmd.ctx.beginPath(),this.whitebmd.ctx.rect(0,0,230,230),this.whitebmd.ctx.fillStyle="#ffffff",this.whitebmd.ctx.fill(),this.whiteSprite=this.add.sprite(this.world.centerX,this.world.height-90,this.whitebmd),this.whiteSprite.anchor.setTo(.5),this.loadingMeterRed=this.add.sprite(this.world.centerX,this.world.height-100,"loading-meter-red"),this.loadingMeterRed.anchor.x=.5,this.loadMeter=this.add.sprite(this.world.centerX+10,this.world.height-50,"loading-meter"),this.loadMeter.anchor.setTo(.5),this.loadGuang=this.add.sprite(this.world.centerX,this.world.height-458,"loading-guang"),this.loadGuang.anchor.setTo(.5),a.bgMusic=this.add.audio("audio-bg",1,!0),this.startAudio=this.add.audio("start",1,!1),a.bgMusic.play(),this.btnStart=this.add.button(this.world.centerX,this.world.height,"btn",null,this,0,0,0),this.btnStart.alpha=0,this.btnStart.anchor.setTo(.5),this.btnStart.inputEnabled=!0,this.btnStart.events.onInputUp.add(function(){this.startAudio.play(),this.state.start("game")},this),this.line=this.add.sprite(this.world.centerX-44,this.world.height-60,"line"),this.line2=this.add.sprite(this.world.centerX+34,this.world.height-121,"line"),this.line.anchor.setTo(.5),this.line2.anchor.setTo(.5),this.line2.alpha=0,this.line.alpha=0,b(this.loadingMeterRed),this.graphics=this.add.graphics(this.world.centerX,578),this.graphics.lineStyle(16,4497882),this.graphics.angle=-90,this.arcValue=2,this.load.onLoadStart.add(this.loadStart,this),this.load.onFileComplete.add(this.fileComplete,this),this.load.onLoadComplete.add(this.loadComplete,this),this.loading()},descText:function(b,e,f){var c,a,d;for(a=0,b=b.split(""),(c=this.add.group()).x=this.world.centerX-e,c.y=f;a<b.length;a++)(d=this.add.text(30*a,120,b[a],{fontSize:30,fill:"#d6f1ff"},c)).anchor.set(.5,.7),d.scale.y=0,this.add.tween(d).to({angle:360},300,Phaser.Easing.Linear.None,!0,100),this.add.tween(d.scale).to({y:1},600,Phaser.Easing.Linear.None,!0,30*a);return c},arcProgress:function(a,b){this.time.events.remove(this.aaa),this.arcValue<a&&(this.aaa=this.time.events.repeat(20,a-this.arcValue,function(){this.arcValue=this.arcValue+b,this.graphics.arc(-3,5,172,this.math.degToRad(this.arcValue++),this.math.degToRad(this.arcValue),!1),this.loadGuang.angle=356===this.arcValue?360:this.arcValue,this.loadNeedle.angle=356===this.arcValue?360:this.arcValue,this.arcValue>354&&(this.time.events.removeAll(),this.animProgress(),this.loadGuang.alpha=0)},this))},animProgress:function(){function a(c,d,e){b.add.tween(c).to({x:d},2e3,"Linear",!0,!1).onComplete.add(function(b){b.x=e,a(c,d,e)},b),b.add.tween(c).to({alpha:1},1e3,"Linear",!0,!1,99,!0)}var b=this;this.loadingMeterRed.alpha=0,this.whiteSprite.alpha=0,this.add.tween(this.loadMeter).to({y:this.world.height+50,alpha:0},800,Phaser.Easing.Quartic.In,!0,!1).onComplete.add(function(){this.add.tween(this.btnStart).to({y:this.world.height-90,alpha:1},800,Phaser.Easing.Quartic.Out,!0,!1).onComplete.add(function(){a(this.line,380,244),a(this.line2,244,380)},this)},this),this.descText("Charge",190,60),this.descText("The Car",70,110)},render:function(){},fileComplete:function(a){this.arcProgress(360*(a/100),1)},loadComplete:function(){},loadStart:function(){},loading:function(){this.load.image("charging","assets/images/charging.png"),this.load.bitmapFont("font-time","assets/fonts/font-time.png","assets/fonts/font-time.xml"),this.load.bitmapFont("font-number-blue","assets/fonts/font-number-blue.png","assets/fonts/font-number.xml"),this.load.bitmapFont("font-number-red","assets/fonts/font-number-red.png","assets/fonts/font-number.xml"),this.load.spritesheet("game-bg","assets/images/game-bg.jpg",640,1038,3),this.load.spritesheet("zizizi","assets/images/zizizi.png",200,100,13),this.load.image("car-0","assets/images/car-0.png"),this.load.image("car-1","assets/images/car-1.png"),this.load.image("car-2","assets/images/car-2.png"),this.load.image("time-bg","assets/images/time-bg.png"),this.load.spritesheet("fire-0","assets/images/fire-0.png",250,200,6),this.load.spritesheet("fire-1","assets/images/fire-1.png",220,200,6),this.load.spritesheet("fire-2","assets/images/fire-2.png",200,200,6),this.load.image("gameover-number","assets/images/gameover-number.png"),this.load.image("ad","assets/images/ad.png"),this.load.image("share","assets/images/share.png"),this.load.image("stop","assets/images/stop.png"),this.load.image("luanyong","assets/images/luanyong.png"),this.load.image("ad-quan","assets/images/ad-quan.png"),this.load.image("ad-car","assets/images/ad-car.png"),this.load.image("ad-g-1","assets/images/ad-g-1.png"),this.load.image("ad-kao","assets/images/ad-kao.png"),this.load.image("ad-you","assets/images/ad-you.png"),this.load.audio("audio-zizizi","assets/music/audio-zizizi.mp3"),this.load.audio("audio-over","assets/music/audio-over.mp3"),this.load.audio("gogo","assets/music/gogo.mp3"),this.load.start()}},a.Game=function(){},a.Game.prototype={preload:function(){},create:function(){var e,c,a,f,b,d;for(this.stage.backgroundColor="#000000",this.FPS=60,this.SPEED=1e4,this.isOver=!1,this.bg=this.add.sprite(0,0,"game-bg"),this.bg.alpha=0,this.bg.animations.add("bg"),this.add.tween(this.bg).to({alpha:1},2e3,Phaser.Easing.Linear.None,!0,!1).onComplete.add(function(){this.bg.animations.play("bg",10,!0)},this),(e=this.add.sprite(this.world.centerX,this.world.height-260,"stop")).anchor.x=.5,e.alpha=0,this.add.tween(e).to({alpha:1},600,"Linear",!0,1e3),this.music={zizizi:this.add.audio("audio-zizizi",5,!0),over:this.add.audio("audio-over",5,!1),gogo:this.add.audio("gogo",5,!1)},(c=this.add.group()).create(0,0,"time-bg"),c.position={x:30,y:-53},this.add.tween(c).to({y:48},1e3,Phaser.Easing.Quartic.In,!0,!1),this.timeText=function(d){var a=parseInt(d/60),c=parseInt(a/60),b=d-60*a;return a>59&&(a-=60),(c>9?c:"0"+c)+":"+(a=a>9?a:"0"+a)+":"+(b=b>9?b:"0"+b)},this.timeBox=this.add.bitmapText(74,12,"font-time",this.timeText(0),44,c),this.timer=this.time.create(!1),this.timesecond=0,this.timer.loop(Phaser.Timer.SECOND/this.FPS,function(){this.timeBox.setText(this.timeText(this.timesecond++))},this),this.timer.start(),this.currentCharg=9,this.carTime=this.time.create(!1),this.carTime.loop(Phaser.Timer.SECOND/40,this.handFrameData,this),this.carMap=[this.creatCar(260,400,-30,110,-100,610,100,0),this.creatCar(292,400,26,140,190,600,90,1),this.creatCar(320,400,80,150,440,610,104,2)],this.carFrame=[0,0,0],this.chargBmd=[],this.chargObj=[this.createCharg(),this.createCharg(),this.createCharg()],this.chargObj[1].charg.x=210,this.chargObj[2].charg.x=420,a=0,f=0;3>a;a++)this.add.tween(this.chargObj[a].charg).to({y:-230},1e3,Phaser.Easing.Quartic.Out,!0,200*a).onComplete.add(function(){this.setDefault(f),f++},this);(b=this.add.bitmapData(640,240)).ctx.beginPath(),b.ctx.fillStyle="#fe0000",b.ctx.rect(0,0,640,this.world.height),b.ctx.fill(),(d=this.add.sprite(0,this.world.height-240,b)).alpha=0,d.inputEnabled=!0,d.events.onInputDown.add(this.handonDown,this),d.events.onInputUp.add(this.handonUp,this)},creatCar:function(g,h,i,j,k,l,m,b){var c,d,e,f,a=this.add.group();return a.create(0,0,"car-"+b),(c=a.create(i,j,"fire-"+b)).animations.add("fire-"+b),c.animations.play("fire-"+b,this.FPS,!0),c.alpha=0,a.position={x:g,y:h},a.alpha=0,d=this.make.tween(a).to({x:k,y:l},this.SPEED,Phaser.Easing.Linear.None,!0,!1),e=this.make.tween(a.scale).to({x:1,y:1},this.SPEED,Phaser.Easing.Linear.None,!0,!1),f=a.create(m,0,"luanyong"),f.alpha=0,a.scale.setTo(.2,.2),{group:a,fire:c,luanyong:f,frameData:{list:d.generateData(this.FPS),len:d.generateData(this.FPS).length-1},scaleFrameData:{list:e.generateData(this.FPS),len:e.generateData(this.FPS)-1}}},setDefault:function(a){var b=this.carMap[a],c=b.frameData.len,d=this.random(70,90),e=parseInt(c-c*(d/100),10);this.carFrame[a]=e,2===a&&this.carTime.start(),this.oldPower=[0,0,0],this.updateBmd(a,d),this.add.tween(b.group).to({alpha:1},100,"Linear",!0,600)},handFrameData:function(){var a,c,e,f,g,h,d,b;for(a=0;3>a;a++){if(c=this.carMap[a],e=this.carFrame[a],f=c.frameData.list[e],g=c.frameData.len,h=c.scaleFrameData.list[e],c.scaleFrameData.len,d=100-parseInt(100*(this.carFrame[a]/g),10),this.carFrame[a]>g&&!this.isOver)return this.updatePower(a,0),this.updateBmd(a,0),void this.gameover();c.group.position={x:f.x,y:f.y},c.group.scale.setTo(h.x,h.y),this.updatePower(a,d),0==d%10&&this.oldPower[a]!==d&&(this.updateBmd(a,d),this.oldPower[a]=d),(b=parseInt(this.timesecond/60,10))>10&&15>b?this.carFrame[a]=this.carFrame[a]+2:b>15&&20>b?this.carFrame[a]=this.carFrame[a]+4:b>20?this.carFrame[a]=this.carFrame[a]+(b-16):this.carFrame[a]++,9!==this.currentCharg&&(this.carFrame[this.currentCharg]=b>10&&15>b?this.carFrame[this.currentCharg]-2:b>15&&20>b?this.carFrame[this.currentCharg]-4:b>20?this.carFrame[this.currentCharg]-(b-16):this.carFrame[this.currentCharg]-1),this.carFrame[a]<30&&(this.carFrame[a]=30),0===this.carFrame[this.currentCharg]&&(this.carFrame[this.currentCharg]=2)}},createCharg:function(){var a,d,e,b,c=this.add.group();for(c.create(-20,this.world.height,"charging"),(a=this.add.bitmapData(68,30)).ctx.beginPath(),a.ctx.fillStyle="#252525",d=0;10>d;d++)a.ctx.rect(7*d,0,5,30);return a.ctx.fill(),e=this.add.bitmapText(70,this.world.height+40,"font-number-blue","10%",30,c),c.create(66,this.world.height+74,a),b=c.create(10,this.world.height-18,"zizizi"),b.animations.add("zizizi"),b.animations.play("zizizi",20,!0),b.alpha=0,this.chargBmd.push(0),{charg:c,bmd:a,text:e,zizizi:b}},updatePower:function(b,a){return this.chargObj[b].text.text=a>99?"99%":a+"%"},updateBmd:function(a,f){var e,b,c=this.chargObj[a].bmd.context,d=parseInt(f/10,10),g=!(d>this.chargBmd[a]);2>=d?(b="#ea0042",this.chargObj[a].text.font="font-number-red",this.carMap[a].luanyong.alpha=1):(b="#00a6ea",this.chargObj[a].text.font="font-number-blue",this.carMap[a].luanyong.alpha=0),g?(e=9,c.fillStyle="#252525",this.time.events.repeat(10,10,function(){d>e&&(c.fillStyle=b),c.fillRect(7*e,0,5,30),e--},this)):(e=0,c.fillStyle=b,this.time.events.repeat(10,10,function(){e===d&&(c.fillStyle="#252525"),c.fillRect(7*e,0,5,30),e++},this)),c.dirty=!0,this.chargBmd[a]=d},handonUp:function(){this.isOver||(this.chargTween(this.currentCharg,!1),this.currentCharg=9,this.music.zizizi.pause(),this.music.gogo.pause())},handonDown:function(d,a){if(!this.isOver){var b=a.x,c=a.y;this.chargTween(this.checkClickCharg(b,c),!0),this.music.zizizi.play(),this.music.gogo.play()}},checkClickCharg:function(a,b){if(b>this.world.height-230){if(210>a)return 0;if(a>210&&400>a)return 1;if(a>450&&620>a)return 2}},chargTween:function(a,b){void 0!==a&&9!==a&&(this.add.tween(this.carMap[a].fire).to({alpha:b?1:0},600,Phaser.Easing.Linear.None,!0,!1),this.add.tween(this.chargObj[a].charg).to({y:b?-260:-230},300,Phaser.Easing.Linear.None,!0,!1),this.add.tween(this.chargObj[a].zizizi).to({alpha:b?1:0},600,Phaser.Easing.Linear.None,!0,!1),this.currentCharg=a)},gameover:function(){function e(a){g.add.tween(a).to({angle:360},3e3,"Linear",!0,!1).onComplete.add(function(b){b.angle=0,e(a)},g)}var a,f,b,c,d,g=this;this.isOver=!0,this.carTime.pause(),this.bg.animations.stop(),this.timer.stop(),this.music.zizizi.pause(),totalTime=this.timesecond,document.title="\u575A\u630130\u79D2\u7B97\u4F60\u884C\uFF01\u6211"+parseInt(this.timesecond/60,10)+"\u79D2\u5C31\u4E0D\u884C\u4E86\uFF0C\u4F60\u884C\u4F60\u6765\u554A\uFF01",this.chargTween(this.currentCharg,!1),(a=this.add.bitmapData(640,this.world.height)).ctx.beginPath(),a.ctx.fillStyle="#fe0000",a.ctx.rect(0,0,640,this.world.height),a.ctx.fill(),(f=this.add.sprite(0,0,a)).alpha=.29,this.time.events.repeat(300,6,function(){f.alpha=.29===f.alpha?0:.29}),(b=this.add.sprite(this.world.centerX,this.world.centerY,"gameover-number")).anchor={x:.5,y:.5},b.alpha=0,this.add.tween(b).to({alpha:1},1e3,"Linear",!0,1800),e(b),c=this.add.text(this.world.centerX+20,this.world.centerY-60,"Game Over",{font:"bold 60px Arial",fill:"#fb0000",align:"center"}),this.timesecond=parseInt(this.timesecond/60,10),d=this.add.text(this.world.centerX,this.world.centerY,""+this.timesecond,{font:"bold 35px Arial",fill:"#fb0000",align:"center"}),c.anchor.set(.5),d.anchor.set(.5),c.alpha=0,d.alpha=0,this.add.tween(c).to({alpha:1},1e3,"Linear",!0,1800),this.add.tween(d).to({alpha:1},1e3,"Linear",!0,1800),this.time.events.add(6e3,function(){f.destroy(),b.destroy(),c.destroy(),d.destroy();var a=this.add.sprite(this.world.centerX,this.world.centerY,"");a.alpha=0,a.anchor={x:.5,y:.5},this.add.tween(a).to({alpha:1},500,"Linear",!0,!1),this.time.events.add(5e3,function(){var d,c,e;function b(a,c,d){g.add.tween(a).to({x:c},2e3,"Linear",!0,!1).onComplete.add(function(e){e.x=d,b(a,c,d)},g),g.add.tween(a).to({alpha:1},1e3,"Linear",!0,!1,99,!0)}a.destroy(),(d=this.add.sprite(0,0,"ad")).alpha=0,this.add.tween(d).to({alpha:1},500,"Linear",!0,!1),this.quan=this.add.sprite(this.world.centerX-8,408,"ad-quan"),this.quan.anchor.setTo(.5),this.adKao=this.add.sprite(this.world.centerX-4,406,"ad-kao"),this.adKao.anchor.setTo(.5),this.adKao.angle=50,this.add.tween(this.adKao).to({angle:-35},1500,"Linear",!0,!1,99,!0),this.adCarg1=this.add.sprite(-30,260,"ad-g-1"),this.adCar=this.add.sprite(-30,260,"ad-car"),this.adCar.alpha=0,this.adCarg1.alpha=0,this.add.tween(this.adCar).to({alpha:1},1e3,"Linear",!0,!1),this.add.tween(this.adCarg1).to({alpha:1},2e3,"Linear",!0,!1,99,!0),(c=this.add.button(this.world.centerX-30,this.world.height-120,"btn",null,this,1,1,1)).anchor.x=1,c.inputEnabled=!0,(e=this.add.button(this.world.centerX,this.world.height-120,"btn",null,this,2,2,2)).inputEnabled=!0,this.line=this.add.sprite(this.world.centerX-150,this.world.height-59,"line"),this.line1=this.add.sprite(this.world.centerX-64,this.world.height-119,"line"),this.line2=this.add.sprite(this.world.centerX+30,this.world.height-59,"line"),this.line3=this.add.sprite(this.world.centerX+134,this.world.height-119,"line"),this.line.anchor.setTo(.5),this.line1.anchor.setTo(.5),this.line2.anchor.setTo(.5),this.line3.anchor.setTo(.5),this.line.alpha=0,this.line1.alpha=0,this.line2.alpha=0,this.line3.alpha=0,b(this.line,270,140),b(this.line1,140,270),b(this.line2,454,350),b(this.line3,350,454),c.events.onInputDown.add(function(){this.again()},this),e.events.onInputDown.add(function(){window.location.href="https://www.facebook.com/ratibur.rahaman.9/"},this),this.youIcon=this.add.sprite(this.world.centerX+190,250,"ad-you"),this.youIcon.anchor.setTo(.5),this.arcProgress(10,34,90,1,250,0,-117,!1,"0x6eaeea","0x0b3245"),this.arcProgress(10,-124,90,1,230,0,-104,!1,"0x0b3245","0x6eaeea"),this.arcProgress(10,88,140,1,190,0,-114,!1,"0x0b3245","0x0b3245"),this.arcProgress(20,88,190,1,220,0,-114,!1,"0x0b3245","0x0b3245")},this)},this),setTimeout(function(){g.music.over.play()},1e3/60)},again:function(){return document.title="",this.state.start("game")},random:function(a,b){return Math.ceil(Math.random()*(b-a)+a)},arcProgress:function(e,g,f,h,m,i,j,a,k,l){var b,c,d;h=a?2:1,(b=this.add.graphics(this.world.centerX+i,this.world.centerY+j)).angle=0-g,b.lineStyle(16,k),c=a?f:0,this.time.events.remove(d),a?c>0&&(d=this.time.events.loop(e,function(){0>(c-=h)&&(b.clear(),this.arcProgress(e,g,f,h,m,i,j,!a,k,l),this.time.events.remove(d)),b.arc(-3,5,m,this.math.degToRad(c++),this.math.degToRad(c--),!1)},this)):(b.lineStyle(16,l),f>c&&(d=this.time.events.loop(e,function(){(c+=h)>f&&(b.clear(),this.time.events.remove(d),this.arcProgress(e,g,f,h,m,i,j,!a,k,l)),b.arc(-3,5,m,this.math.degToRad(c++),this.math.degToRad(c),!1)},this)))}},function(){var c,b=new Phaser.Game(640,1038,Phaser.CANVAS,"game");b.state.add("boot",a.Boot),b.state.add("preload",a.Preload),b.state.add("game",a.Game),b.state.start("boot"),c=function(){document.getElementById("tips").style.display=90==window.orientation|| -90==window.orientation?"block":"none"},window.addEventListener("onorientationchange"in window?"orientationchange":"resize",c,!1)}()